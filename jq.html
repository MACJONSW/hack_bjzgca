<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>家桥 · 统一页面</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet" />
  <style>
    :root {
      --cream: #fff6ee;
      --milk: #fffaf5;
      --peach: #ffd7c2;
      --apricot: #ffb388;
      --rose: #ff8e7a;
      --cocoa: #4a352d;
      --ink: #2b221d;
      --sage: #9dbd9b;
      --sky: #a7c8ff;
      --lavender: #ccb7ff;
      --shadow: 0 20px 50px rgba(62, 42, 33, 0.12);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Noto Sans SC", "PingFang SC", "Microsoft YaHei", sans-serif;
      color: var(--ink);
      background: radial-gradient(circle at 10% 10%, #fff0e6, #fff7f1 45%, #fffaf6 70%),
        linear-gradient(130deg, #fff6ed 0%, #fffdf9 100%);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background-image: radial-gradient(rgba(255, 191, 166, 0.25) 1px, transparent 1px),
        radial-gradient(rgba(255, 230, 214, 0.5) 1px, transparent 1px);
      background-size: 22px 22px, 34px 34px;
      background-position: 0 0, 12px 12px;
      pointer-events: none;
      z-index: 0;
    }

    .app {
      width: min(420px, 100%);
      height: min(860px, 100vh);
      background: var(--milk);
      border-radius: 36px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      border: 1px solid rgba(255, 197, 173, 0.5);
      z-index: 1;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px 22px 10px;
      font-size: 12px;
      color: #8d756c;
      background: #fff;
      border-bottom: 1px solid rgba(255, 205, 183, 0.5);
    }

    .status-icons {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ffd1b8;
    }

    .header {
      padding: 20px 22px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #fff;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo {
      width: 44px;
      height: 44px;
      border-radius: 16px;
      display: grid;
      place-items: center;
      font-family: "ZCOOL XiaoWei", serif;
      font-size: 20px;
      color: #fff;
      background: linear-gradient(135deg, var(--apricot), var(--rose));
      box-shadow: 0 10px 24px rgba(255, 152, 125, 0.35);
    }

    .brand h1 {
      margin: 0;
      font-family: "ZCOOL XiaoWei", serif;
      font-size: 22px;
      color: var(--cocoa);
    }

    .brand p {
      margin: 2px 0 0;
      font-size: 12px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: #9a7f74;
    }

    .avatar {
      width: 42px;
      height: 42px;
      border-radius: 50%;
      background: #ffe6d5;
      display: grid;
      place-items: center;
      color: #c75a3d;
      font-weight: 600;
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 18px 18px 110px;
      display: block;
      position: relative;
    }

    .screen {
      display: none;
      animation: fadeUp 0.4s ease;
    }

    .screen.active {
      display: block;
    }

    .card {
      background: #fff;
      border-radius: 24px;
      padding: 16px;
      box-shadow: 0 14px 28px rgba(60, 40, 32, 0.08);
      border: 1px solid rgba(255, 197, 173, 0.35);
    }

    .card + .card {
      margin-top: 14px;
    }

    .section-title {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      color: #7a6258;
      font-weight: 600;
      font-size: 14px;
    }

    .chip {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #fff1e7;
      color: #a06f60;
    }

    .cta {
      border: none;
      padding: 10px 16px;
      border-radius: 14px;
      font-weight: 600;
      background: linear-gradient(135deg, var(--apricot), var(--rose));
      color: #fff;
      cursor: pointer;
      box-shadow: 0 12px 22px rgba(255, 152, 125, 0.3);
    }

    .cta:active {
      transform: scale(0.98);
    }

    .tile-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .tile {
      border-radius: 20px;
      padding: 14px;
      background: #fff7f1;
      border: 1px dashed rgba(255, 186, 151, 0.6);
      min-height: 100px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .tile strong {
      font-size: 14px;
    }

    .tile span {
      font-size: 12px;
      color: #7c655d;
    }

    .list {
      display: grid;
      gap: 10px;
    }

    .list-item {
      display: flex;
      gap: 12px;
      align-items: center;
      background: #fff7f1;
      border-radius: 16px;
      padding: 12px;
    }

    .bubble {
      width: 38px;
      height: 38px;
      border-radius: 14px;
      display: grid;
      place-items: center;
      background: #fff;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.06);
      font-size: 18px;
    }

    .input-wrap {
      display: flex;
      gap: 8px;
      align-items: center;
      padding: 10px 12px;
      border-radius: 16px;
      background: #fff;
      border: 1px solid rgba(255, 202, 176, 0.6);
    }

    .input-wrap input {
      border: none;
      outline: none;
      flex: 1;
      font-size: 14px;
      background: transparent;
    }

    .ghost-btn {
      border: 1px dashed rgba(255, 176, 138, 0.8);
      background: #fff;
      color: #a0705f;
      padding: 10px 14px;
      border-radius: 14px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .cta-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .pill-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .pill {
      padding: 6px 10px;
      background: #fff4ee;
      border-radius: 12px;
      font-size: 12px;
      color: #8a6a5d;
      cursor: pointer;
    }

    .result {
      margin-top: 12px;
      background: #fff7f2;
      border-radius: 18px;
      padding: 12px;
      font-size: 13px;
      color: #6f5850;
      line-height: 1.6;
      display: none;
    }

    .result.active {
      display: block;
    }

    .album-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .album-item {
      aspect-ratio: 1 / 1;
      background: linear-gradient(135deg, #ffd7c2, #fff4ee);
      border-radius: 14px;
      display: grid;
      place-items: center;
      color: #8a6a5d;
      font-size: 12px;
      text-align: center;
      padding: 6px;
    }

    .album-item.placeholder {
      background: #fff;
      border: 2px dashed rgba(255, 176, 138, 0.7);
      color: #b08a7d;
    }

    .album-item.video-slot {
      aspect-ratio: 16 / 9;
      grid-column: 1 / -1;
      font-size: 13px;
    }

    .bottom-nav {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      padding: 12px 18px 20px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(12px);
      border-top: 1px solid rgba(255, 205, 183, 0.5);
      display: flex;
      justify-content: space-between;
      gap: 6px;
    }

    .nav-btn {
      flex: 1;
      border: none;
      background: transparent;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: #b29a91;
      cursor: pointer;
      padding: 6px 0;
      font-family: inherit;
    }

    .nav-btn.active {
      color: #cf6a4f;
      font-weight: 600;
    }

    .nav-dot {
      width: 36px;
      height: 36px;
      border-radius: 16px;
      display: grid;
      place-items: center;
      background: #fff2ea;
      color: #cf6a4f;
      font-size: 18px;
    }

    .soft-note {
      font-size: 12px;
      color: #8a6a5d;
      line-height: 1.5;
      margin-top: 10px;
    }

    .thermo {
      background: linear-gradient(120deg, rgba(255, 199, 170, 0.9), rgba(255, 236, 218, 0.9));
      border-radius: 20px;
      padding: 14px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      border: 1px solid rgba(255, 190, 164, 0.6);
    }

    .thermo-bar {
      flex: 1;
      height: 10px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      overflow: hidden;
      position: relative;
    }

    .thermo-fill {
      height: 100%;
      width: 78%;
      background: linear-gradient(90deg, #ffd5b6, #ff9e7c);
      border-radius: 999px;
      box-shadow: 0 6px 12px rgba(255, 152, 125, 0.35);
    }

    .care-script {
      margin-top: 12px;
      padding: 12px 14px;
      background: #fff;
      border-radius: 18px;
      border: 1px dashed rgba(255, 176, 138, 0.7);
      display: grid;
      gap: 10px;
    }

    .care-script p {
      margin: 0;
      font-size: 13px;
      color: #6f5850;
      line-height: 1.6;
    }

    .care-script button {
      justify-self: start;
    }

    .chat-card {
      margin-top: 14px;
      display: grid;
      gap: 10px;
    }

    .chat-bubble {
      background: #fff;
      border-radius: 18px;
      padding: 12px;
      border: 1px solid rgba(255, 205, 183, 0.7);
      box-shadow: 0 10px 24px rgba(62, 42, 33, 0.08);
      position: relative;
      cursor: pointer;
    }

    .chat-bubble .from {
      font-size: 12px;
      color: #9a7f74;
      margin-bottom: 6px;
    }

    .chat-heart {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 8px;
      font-size: 12px;
      color: #c08a6c;
    }

    .chat-heart .dot {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff6e8, #f7d6b8);
      display: grid;
      place-items: center;
      color: #c06a4f;
      font-size: 12px;
    }

    .chat-translate {
      display: none;
      margin-top: 10px;
      padding: 10px 12px;
      background: #fff5e4;
      border-radius: 14px;
      font-size: 13px;
      color: #7a5d52;
      line-height: 1.6;
      border: 1px solid rgba(240, 200, 160, 0.8);
    }

    .chat-bubble.active .chat-translate {
      display: block;
    }

    .care-chat-window {
      height: 260px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
      padding-right: 4px;
    }

    .care-chat-window .chat-bubble {
      cursor: default;
      max-width: 78%;
      padding: 8px 10px;
      font-size: 13px;
      width: fit-content;
    }

    .care-chat-options {
      display: flex;
      justify-content: center;
      gap: 14px;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    .care-chat-option {
      border: none;
      padding: 0;
      background: transparent;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      position: relative;
    }

    .care-chat-option img {
      width: 50px;
      height: 60px;
      border-radius: 50% 50% 46% 46%;
      object-fit: cover;
      box-shadow: 0 6px 16px rgba(60, 40, 32, 0.16);
      border: 2px solid rgba(255, 202, 176, 0.9);
      display: block;
      animation: careFloat 4s ease-in-out infinite alternate;
    }

    .care-chat-option:nth-child(2) img {
      animation-delay: 0.4s;
    }

    .care-chat-option:nth-child(3) img {
      animation-delay: 0.8s;
    }

    .care-chat-option:nth-child(4) img {
      animation-delay: 1.2s;
    }

    .care-chat-option span {
      padding: 0;
      font-size: 11px;
      color: #7a6258;
      text-align: center;
      max-width: 80px;
      line-height: 1.3;
      position: relative;
      padding-top: 10px;
    }

    .care-chat-option span::before {
      content: "";
      position: absolute;
      top: -36px;
      left: 50%;
      width: 68px;
      height: 36px;
      transform: translateX(-50%);
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='68' height='36' viewBox='0 0 68 36'%3E%3Cpath d='M34 0 C26 8 18 18 16 34' stroke='rgba(184,132,104,0.95)' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3Cpath d='M34 0 C42 8 50 18 52 34' stroke='rgba(184,132,104,0.7)' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E") center/contain no-repeat;
      pointer-events: none;
      filter: drop-shadow(0 2px 4px rgba(90, 60, 45, 0.12));
      transition: opacity 0.25s ease;
    }

    .care-chat-option.launching {
      pointer-events: none;
    }

    .care-chat-option.launching span,
    .care-chat-option.launching span::before {
      opacity: 0;
    }

    .care-chat-option.launching img {
      opacity: 0;
      transform: translateY(-6px) scale(0.98);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .balloon-fly {
      position: fixed;
      width: 54px;
      height: 64px;
      border-radius: 50% 50% 46% 46%;
      object-fit: cover;
      box-shadow: 0 12px 26px rgba(62, 42, 33, 0.18);
      border: 2px solid rgba(255, 202, 176, 0.95);
      z-index: 20;
      pointer-events: none;
    }

    .balloon-fly-line {
      position: fixed;
      width: 48px;
      height: 40px;
      pointer-events: none;
      z-index: 19;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='40' viewBox='0 0 48 40'%3E%3Cpath d='M24 0 C18 10 14 22 12 38' stroke='rgba(184,132,104,0.9)' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3Cpath d='M24 0 C30 10 34 22 36 38' stroke='rgba(184,132,104,0.6)' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E") center/contain no-repeat;
      filter: drop-shadow(0 2px 4px rgba(90, 60, 45, 0.12));
    }

    .notice {
      margin-top: 12px;
      padding: 12px 14px;
      background: #fff1ea;
      border-radius: 16px;
      border: 1px solid rgba(255, 182, 154, 0.7);
      font-size: 13px;
      color: #7a5d52;
      line-height: 1.6;
    }

    .notice-title {
      display: inline-block;
      font-size: 12px;
      font-weight: 600;
      color: #c05c45;
      margin-bottom: 6px;
    }

    .fab-stack {
      position: absolute;
      right: 16px;
      bottom: 92px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 5;
    }

    .fab {
      border: none;
      padding: 10px 14px;
      border-radius: 999px;
      background: #fff;
      color: #b45f48;
      box-shadow: 0 10px 24px rgba(62, 42, 33, 0.14);
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .fab-stack[data-screen] {
      display: none;
    }

    .fab-stack.active {
      display: flex;
    }

    .split-layout {
      display: grid;
      gap: 14px;
    }

    .glass-card {
      background: rgba(255, 255, 255, 0.65);
      border: 1px solid rgba(255, 197, 173, 0.45);
      box-shadow: 0 18px 36px rgba(62, 42, 33, 0.12);
      backdrop-filter: blur(14px);
    }

    .camera-hero {
      position: relative;
      min-height: 180px;
      border-radius: 24px;
      overflow: hidden;
      padding: 16px;
      display: grid;
      gap: 12px;
    }

    .camera-hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.6), transparent 55%),
        radial-gradient(circle at 80% 30%, rgba(255, 213, 186, 0.65), transparent 50%),
        linear-gradient(135deg, rgba(255, 232, 219, 0.8), rgba(255, 255, 255, 0.6));
      z-index: 0;
    }

    .camera-hero > * {
      position: relative;
      z-index: 1;
    }

    .camera-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .camera-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px dashed rgba(255, 176, 138, 0.75);
      color: #9a6b5d;
      font-size: 12px;
      cursor: pointer;
    }

    .share-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 176, 138, 0.75);
      color: #9a6b5d;
      font-size: 12px;
      cursor: pointer;
    }

    .diary-cover {
      margin-top: 12px;
      padding: 14px;
      border-radius: 18px;
      background: linear-gradient(120deg, #fff, #fff5ec);
      border: 1px solid rgba(255, 197, 173, 0.45);
      display: grid;
      gap: 6px;
    }

    .personal-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .personal-photo {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(255, 197, 173, 0.45);
      box-shadow: 0 10px 20px rgba(62, 42, 33, 0.12);
      aspect-ratio: 4 / 3;
      background: #fff;
    }

    .personal-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .gravity-field {
      position: relative;
      min-height: 230px;
      border-radius: 24px;
      padding: 16px;
      background: radial-gradient(circle at 20% 20%, rgba(255, 230, 214, 0.7), transparent 60%),
        radial-gradient(circle at 80% 30%, rgba(204, 214, 255, 0.5), transparent 55%),
        linear-gradient(180deg, #fff8f2, #fff4ee);
      border: 1px solid rgba(255, 205, 183, 0.6);
      overflow: hidden;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      align-content: start;
    }

    .bubble-icon {
      position: absolute;
      display: grid;
      place-items: center;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.85);
      border: 1px solid rgba(255, 197, 173, 0.6);
      box-shadow: 0 12px 24px rgba(62, 42, 33, 0.12);
      font-size: 22px;
    }

    .bubble-icon small {
      position: absolute;
      bottom: -18px;
      font-size: 10px;
      color: #9a7f74;
      white-space: nowrap;
    }

    .photo-bubble {
      position: relative;
      width: 100%;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      overflow: hidden;
      border: 2px solid rgba(255, 197, 173, 0.75);
      box-shadow: 0 14px 26px rgba(62, 42, 33, 0.16);
      background: #fff;
    }

    .photo-bubble img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .photo-bubble small {
      position: absolute;
      bottom: -18px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 10px;
      color: #9a7f74;
      white-space: nowrap;
    }

    .preview-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .topic-sheet {
      margin-top: 14px;
      border-radius: 20px;
      background: #fff;
      border: 1px solid rgba(255, 197, 173, 0.45);
      padding: 14px;
      display: grid;
      gap: 10px;
    }


    .topic-pill {
      padding: 8px 12px;
      border-radius: 12px;
      background: #fff6f0;
      font-size: 12px;
      color: #7a6258;
    }

    .topic-editor {
      width: 100%;
      min-height: 70px;
      border-radius: 12px;
      border: 1px dashed rgba(255, 176, 138, 0.75);
      padding: 10px 12px;
      font-size: 12px;
      font-family: inherit;
      color: #6f5850;
      background: #fffdfb;
      resize: vertical;
    }

    .summary-card {
      margin-top: 12px;
      padding: 12px;
      border-radius: 14px;
      background: #fff9f4;
      border: 1px solid rgba(255, 197, 173, 0.45);
      font-size: 12px;
      color: #6f5850;
      line-height: 1.6;
    }

    .summary-card.hidden {
      display: none;
    }

    .summary-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .typewriter .char {
      display: inline-block;
      opacity: 0;
      transform: translateY(4px);
      animation: typeFloat 0.4s ease forwards;
    }

    .member-list {
      display: grid;
      gap: 10px;
    }

    .member-row {
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 10px;
      background: #fff7f1;
      border-radius: 16px;
      padding: 10px 12px;
    }

    .member-avatar {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background: #fff;
      border: 1px solid rgba(255, 197, 173, 0.6);
      display: grid;
      place-items: center;
      color: #c06a4f;
      font-weight: 600;
      font-size: 13px;
    }

    .member-thumb {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 52px));
      grid-auto-rows: 52px;
      gap: 6px;
      padding: 4px;
      border-radius: 14px;
      background: #ffe9e2;
    }

    .member-thumb img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: 10px;
      display: block;
      background: #ffe9e2;
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(31, 23, 19, 0.35);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 10;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-card {
      width: min(360px, 92vw);
      background: #fff;
      border-radius: 20px;
      padding: 16px;
      border: 1px solid rgba(255, 197, 173, 0.6);
      box-shadow: 0 18px 36px rgba(62, 42, 33, 0.2);
      display: grid;
      gap: 12px;
    }

    .select-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    .select-item {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid rgba(255, 197, 173, 0.5);
      aspect-ratio: 4 / 3;
      cursor: pointer;
    }

    .select-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .select-item.selected {
      outline: 2px solid rgba(255, 150, 120, 0.9);
      outline-offset: 2px;
    }

    .select-item.selected::after {
      content: "✓";
      position: absolute;
      top: 6px;
      right: 6px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(255, 150, 120, 0.95);
      color: #fff;
      font-size: 12px;
      display: grid;
      place-items: center;
    }

    .toggle-row {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: #7a6258;
    }

    .time-grid {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 6px;
    }

    .mini-widget {
      position: absolute;
      top: 10px;
      right: 12px;
      background: rgba(255, 255, 255, 0.96);
      border: 1px solid rgba(255, 197, 173, 0.6);
      box-shadow: 0 10px 24px rgba(62, 42, 33, 0.12);
      border-radius: 16px;
      padding: 10px 12px;
      font-size: 12px;
      color: #6f5850;
      display: grid;
      gap: 4px;
      z-index: 3;
    }

    .bell-widget {
      position: absolute;
      top: 10px;
      right: 12px;
      z-index: 3;
    }

    .bell-btn {
      width: 40px;
      height: 40px;
      border-radius: 14px;
      border: 1px solid rgba(255, 197, 173, 0.6);
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 10px 24px rgba(62, 42, 33, 0.12);
      display: grid;
      place-items: center;
      font-size: 18px;
      cursor: pointer;
    }

    .bell-btn.ringing {
      animation: bellSwing 0.8s ease;
    }

    .bell-panel {
      margin-top: 8px;
      background: rgba(255, 255, 255, 0.98);
      border: 1px solid rgba(255, 197, 173, 0.6);
      border-radius: 16px;
      padding: 10px 12px;
      font-size: 12px;
      color: #6f5850;
      display: none;
      box-shadow: 0 10px 24px rgba(62, 42, 33, 0.12);
      min-width: 180px;
    }

    .bell-panel.active {
      display: grid;
      gap: 6px;
    }

    @keyframes bellSwing {
      0% { transform: rotate(0deg); }
      15% { transform: rotate(12deg); }
      30% { transform: rotate(-10deg); }
      45% { transform: rotate(8deg); }
      60% { transform: rotate(-6deg); }
      75% { transform: rotate(4deg); }
      100% { transform: rotate(0deg); }
    }

    @keyframes typeFloat {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes careFloat {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(-8px);
      }
    }

    @keyframes balloonLaunch {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      60% {
        opacity: 1;
      }
      100% {
        transform: translateY(-60px) scale(0.9);
        opacity: 0;
      }
    }

    @media (max-width: 520px) {
      body {
        padding: 0;
      }

      .app {
        width: 100%;
        height: 100vh;
        border-radius: 0;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }

      .typewriter .char {
        opacity: 1 !important;
        transform: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="家桥 统一页面">
    <div class="status-bar">
      <span id="clock">09:41</span>
      <div class="status-icons">
        <div class="status-dot"></div>
        <div class="status-dot"></div>
        <span>82%</span>
      </div>
    </div>

    <div class="header">
      <div class="brand">
        <div class="logo">家</div>
        <div>
          <h1>家桥</h1>
          <p>HearthBridge</p>
        </div>
      </div>
      <div class="avatar">我</div>
    </div>

    <main class="content">
      <section class="screen" id="screen-care">
        <div class="card">
          <div class="section-title">
            <span>随地聊</span>
          </div>
          <div class="care-chat-window chat-card" id="care-chat-window">
            <div class="chat-bubble">
              <div class="from">家桥 · 提醒</div>
              今天随便聊聊，不一定要有主题，只要有一句“你最近怎么样？”就很好。
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 14px;">
          <div class="section-title">
            <span>从哪儿开始聊？</span>
          </div>
          <div class="care-chat-options">
            <button class="care-chat-option" data-key="开心">
              <img src="jst/开心.jpeg" alt="开心" />
              <span>最近的一件开心小事</span>
            </button>
            <button class="care-chat-option" data-key="火锅">
              <img src="jst/火锅.jpg" alt="火锅" />
              <span>老北京铜锅涮肉</span>
            </button>
            <button class="care-chat-option" data-key="电影">
              <img src="jst/电影.jpg" alt="电影" />
              <span>电影真好看</span>
            </button>
            <button class="care-chat-option" data-key="雪">
              <img src="jst/雪.jpeg" alt="雪" />
              <span>下雪天的一段记录</span>
            </button>
          </div>
        </div>
      </section>

      <section class="screen active" id="screen-story">
        <div class="bell-widget">
          <button class="bell-btn" id="bell-btn" aria-label="平安打卡">🔔</button>
          <div class="bell-panel" id="bell-panel">
            <strong>今日关怀</strong>
            <span>我 11:03 · 已报平安</span>
            <span>妈妈 08:12 · 已报平安</span>
            <span>爸爸 · 未报平安</span>
          </div>
        </div>
        <div class="split-layout">
          <div class="card glass-card camera-hero">
            <div class="section-title" style="margin-bottom: 6px;">
              <span>个人拾光区</span>
              <span class="chip">Personal Context</span>
            </div>
            <div class="soft-note">随手拍记录开心时刻，弱化“上传”感。</div>
            <div class="camera-actions">
              <button class="share-pill">🫶 发送到家庭共鸣</button>
            </div>
            <div class="personal-grid">
              <div class="personal-photo">
                <img src="personal_context/hack.jpg" alt="拾光 1" />
              </div>
              <div class="personal-photo">
                <img src="personal_context/1769653727127_d.jpg" alt="拾光 2" />
              </div>
              <div class="personal-photo">
                <img src="personal_context/1769654339765_d.jpg" alt="拾光 3" />
              </div>
            </div>
            <div class="diary-cover">
              <strong>个人总结</strong>
              <span class="soft-note typewriter" data-text="“这 7 天你过得很充实，是否要将这份快乐投射到家桥？”"></span>
              <span class="soft-note typewriter" data-text="Check 是一种自我治愈，而非审核。"></span>
            </div>
          </div>

          <div class="card">
            <div class="section-title">
              <span>家庭成员总结</span>
              <span class="chip">最近十天</span>
            </div>
            <div class="member-list">
              <div class="member-row">
                <div class="member-avatar">爸</div>
                <div class="member-thumb">
                  <img src="static/1769654310825_d.jpg" alt="爸爸的照片 1" />
                  <img src="static/1769656829735_d.jpg" alt="爸爸的照片 2" />
                  <img src="static/1769656851571_d.jpg" alt="爸爸的照片 3" />
                </div>
                <button class="ghost-btn member-view" data-member="dad">查看</button>
              </div>
              <div class="member-row">
                <div class="member-avatar">妈</div>
                <div class="member-thumb">
                  <img src="static/1769657502902_d.jpg" alt="妈妈的照片 1" />
                  <img src="static/1769657749561_d.jpg" alt="妈妈的照片 2" />
                  <img src="static/1769657776345_d.jpg" alt="妈妈的照片 3" />
                </div>
                <button class="ghost-btn member-view" data-member="mom">查看</button>
              </div>
              <div class="member-row">
                <div class="member-avatar">我</div>
                <div class="member-thumb">
                  <img src="static/1769657875517_d.jpg" alt="我的照片 1" />
                  <img src="static/1769658191713_d.jpg" alt="我的照片 2" />
                  <img src="static/1769658200937_d.jpg" alt="我的照片 3" />
                </div>
                <button class="ghost-btn member-view" data-member="me">查看</button>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="section-title">
              <span>家庭共鸣空间</span>
              <span class="chip">Family Resonance</span>
            </div>
            <div class="summary-actions" style="margin-bottom: 8px;">
              <button class="ghost-btn" id="preview-btn">一键预览全部</button>
              <span class="soft-note">查看家庭共享空间照片</span>
            </div>
            <div class="gravity-field" id="resonance-field"></div>
          </div>
        </div>
      </section>
    </main>

    <div class="fab-stack active" data-screen="story" aria-label="心语桥影集快捷操作"></div>
    <div class="fab-stack" data-screen="care" aria-label="随地聊快捷操作"></div>

    <nav class="bottom-nav" aria-label="底部导航">
      <button class="nav-btn active" data-target="story">
        <div class="nav-dot">✨</div>
        心语桥·影集
      </button>
      <button class="nav-btn" data-target="care">
        <div class="nav-dot">💬</div>
        随地聊
      </button>
    </nav>

    <div class="modal-overlay" id="share-modal" aria-hidden="true">
      <div class="modal-card">
        <div class="section-title">
          <span>发送到家庭共鸣</span>
          <button class="ghost-btn" id="share-close">关闭</button>
        </div>
        <div class="soft-note">选择想分享的照片（可多选）</div>
        <div class="select-grid" id="share-grid">
          <div class="select-item selected" data-image="personal_context/hack.jpg">
            <img src="personal_context/hack.jpg" alt="拾光 A" />
          </div>
          <div class="select-item selected" data-image="personal_context/1769653727127_d.jpg">
            <img src="personal_context/1769653727127_d.jpg" alt="拾光 B" />
          </div>
          <div class="select-item selected" data-image="personal_context/1769654339765_d.jpg">
            <img src="personal_context/1769654339765_d.jpg" alt="拾光 C" />
          </div>
        </div>
        <div class="summary-card" id="share-summary">
          这段时间你记录了工作与小确幸，也有生活里的温暖瞬间。整体氛围轻松而有活力，适合分享给家人一起回味。
        </div>
        <label class="toggle-row">
          <input type="checkbox" id="share-upload" checked />
          上传到家庭共鸣区
        </label>
        <div class="cta-group">
          <button class="cta" id="share-confirm">确认</button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="time-modal" aria-hidden="true">
      <div class="modal-card">
        <div class="section-title">
          <span>时光总结</span>
          <button class="ghost-btn" id="time-close">关闭</button>
        </div>
        <div class="time-grid" id="time-grid"></div>
        <div class="summary-card">
          这些照片记录了家人近期的生活片段：一餐好饭、一次小庆祝、一天的忙碌与放松，串起了彼此的日常节奏。
        </div>
      </div>
    </div>

    <div class="modal-overlay" id="preview-modal" aria-hidden="true">
      <div class="modal-card">
        <div class="section-title">
          <span>家庭共享照片</span>
          <button class="ghost-btn" id="preview-close">关闭</button>
        </div>
        <div class="preview-grid" id="preview-grid"></div>
      </div>
    </div>

    <div class="modal-overlay" id="member-modal" aria-hidden="true">
      <div class="modal-card">
        <div class="section-title">
          <span id="member-title">家庭成员总结</span>
          <button class="ghost-btn" id="member-close">关闭</button>
        </div>
        <div class="preview-grid" id="member-grid"></div>
        <div class="summary-card" id="member-summary"></div>
      </div>
    </div>
  </div>

  <script>
    const buttons = document.querySelectorAll(".nav-btn");
    const screens = document.querySelectorAll(".screen");

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        buttons.forEach((item) => item.classList.remove("active"));
        btn.classList.add("active");
        const target = btn.dataset.target;
        screens.forEach((screen) => screen.classList.remove("active"));
        document.getElementById(`screen-${target}`).classList.add("active");
        document.querySelectorAll(".fab-stack").forEach((fab) => {
          fab.classList.toggle("active", fab.dataset.screen === target);
        });
      });
    });

    const careNotes = {
      开心: "听你这么说，我就放心了，在外面过得开心就好。",
      火锅: "你们晚上吃火锅啊？下雪天吃这个最舒服了。",
      电影: "吃完火锅还去看电影了？安排得挺丰富啊。",
      雪: "北京下雪啦？还拍了其他照片吗？我一看到你说窗外全白了，就觉得肯定特别好看。",
    };

    const careChatWindow = document.getElementById("care-chat-window");

    const appendCareMessage = (text) => {
      if (!careChatWindow) return;
      const clean = (text || "").replace(/\n\s*\n+/g, "\n").trim();
      if (!clean) return;

      const bubble = document.createElement("div");
      bubble.className = "chat-bubble";

      const from = document.createElement("div");
      from.className = "from";
      from.textContent = "妈";

      const body = document.createElement("div");
      body.textContent = clean;

      bubble.appendChild(from);
      bubble.appendChild(body);
      careChatWindow.appendChild(bubble);
      careChatWindow.scrollTop = careChatWindow.scrollHeight;
    };

    document.querySelectorAll(".care-chat-option").forEach((btn) => {
      btn.addEventListener("click", () => {
        const key = btn.dataset.key;
        const text = careNotes[key];
        if (!text) return;
        if (btn.classList.contains("launching")) return;
        btn.classList.add("launching");

        const img = btn.querySelector("img");
        const rect = img.getBoundingClientRect();
        const fly = document.createElement("img");
        fly.src = img.src;
        fly.alt = img.alt;
        fly.className = "balloon-fly";
        fly.style.left = `${rect.left}px`;
        fly.style.top = `${rect.top}px`;
        document.body.appendChild(fly);

        const targetRect = careChatWindow.getBoundingClientRect();
        const targetX = targetRect.left + Math.min(90, targetRect.width - 70);
        const targetY = targetRect.top + 26;

        const flyLine = document.createElement("div");
        flyLine.className = "balloon-fly-line";
        flyLine.style.left = `${rect.left + rect.width / 2 - 24}px`;
        flyLine.style.top = `${rect.top + rect.height - 6}px`;
        document.body.appendChild(flyLine);

        const dx = targetX - rect.left;
        const dy = targetY - rect.top;
        const midX = dx * 0.55 + (dx > 0 ? -18 : 18);
        const midY = dy * 0.5 - 28;

        fly.animate(
          [
            { transform: "translate(0px, 0px) scale(1)", opacity: 1 },
            { transform: `translate(${midX}px, ${midY}px) scale(0.96)`, opacity: 0.98 },
            { transform: `translate(${dx}px, ${dy}px) scale(0.86)`, opacity: 0 },
          ],
          { duration: 900, easing: "cubic-bezier(0.22, 0.61, 0.36, 1)", fill: "forwards" }
        );

        flyLine.animate(
          [
            { transform: "translate(0px, 0px)", opacity: 1 },
            { transform: `translate(${midX}px, ${midY + 12}px)`, opacity: 0.85 },
            { transform: `translate(${dx}px, ${dy + 18}px)`, opacity: 0 },
          ],
          { duration: 850, easing: "cubic-bezier(0.22, 0.61, 0.36, 1)", fill: "forwards" }
        );

        setTimeout(() => {
          fly.remove();
          flyLine.remove();
          appendCareMessage(text);
          btn.remove();
        }, 900);
      });
    });

    const resonanceField = document.getElementById("resonance-field");
    const staticImages = [
      "static/1769657827881_d.jpg",
      "static/1769657875517_d.jpg",
      "static/1769657794037_d.jpg",
      "static/1769657776345_d.jpg",
      "static/1769657749561_d.jpg",
      "static/1769657502902_d.jpg",
      "static/1769657480760_d.jpg",
      "static/1769656877772_d.jpg",
      "static/1769656851571_d.jpg",
      "static/1769656829735_d.jpg",
      "static/1769654310825_d.jpg",
      "static/food.jpg",
      "static/mj.jpg",
      "static/sun.jpg",
      "static/yh.jpg",
    ];

    const positions = [
      { top: "14px", left: "18px" },
      { top: "44px", right: "22px" },
      { top: "96px", left: "120px" },
      { bottom: "36px", left: "36px" },
      { bottom: "18px", right: "54px" },
      { top: "140px", right: "120px" },
      { bottom: "80px", right: "140px" },
    ];

    const labels = ["日常", "家常", "烟花", "散步", "心情", "咖啡", "晚餐"];

    staticImages.forEach((src, index) => {
      const bubble = document.createElement("div");
      bubble.className = "photo-bubble";
      const pos = positions[index % positions.length];
      Object.assign(bubble.style, pos);
      const img = document.createElement("img");
      img.src = src;
      img.alt = "家庭记忆";
      const small = document.createElement("small");
      small.textContent = labels[index % labels.length];
      bubble.appendChild(img);
      bubble.appendChild(small);
      resonanceField.appendChild(bubble);
    });

    const timeModal = document.getElementById("time-modal");
    const timeGrid = document.getElementById("time-grid");
    const previewModal = document.getElementById("preview-modal");
    const previewGrid = document.getElementById("preview-grid");
    const memberModal = document.getElementById("member-modal");
    const memberGrid = document.getElementById("member-grid");
    const memberTitle = document.getElementById("member-title");
    const memberSummary = document.getElementById("member-summary");

    const renderResonanceBubbles = () => {
      resonanceField.innerHTML = "";
      staticImages.slice(0, 6).forEach((src, index) => {
        const bubble = document.createElement("div");
        bubble.className = "photo-bubble";
        bubble.dataset.src = src;
        const img = document.createElement("img");
        img.src = src;
        img.alt = "家庭记忆";
        const small = document.createElement("small");
        small.textContent = labels[index % labels.length];
        bubble.appendChild(img);
        bubble.appendChild(small);
        resonanceField.appendChild(bubble);
      });
    };

    const openTimeSummary = (selectedSrc) => {
      timeGrid.innerHTML = "";
      const list = selectedSrc
        ? [selectedSrc, ...staticImages.filter((src) => src !== selectedSrc)]
        : [...staticImages];
      list.slice(0, 5).forEach((src) => {
        const item = document.createElement("div");
        item.className = "select-item";
        const img = document.createElement("img");
        img.src = src;
        img.alt = "时光照片";
        item.appendChild(img);
        timeGrid.appendChild(item);
      });
      timeModal.classList.add("active");
    };

    renderResonanceBubbles();

    resonanceField.addEventListener("click", (event) => {
      const bubble = event.target.closest(".photo-bubble");
      if (!bubble) return;
      openTimeSummary(bubble.dataset.src);
    });

    document.getElementById("time-close").addEventListener("click", () => {
      timeModal.classList.remove("active");
    });

    document.getElementById("preview-btn").addEventListener("click", () => {
      previewGrid.innerHTML = "";
      staticImages.forEach((src) => {
        const item = document.createElement("div");
        item.className = "select-item";
        item.dataset.src = src;
        const img = document.createElement("img");
        img.src = src;
        img.alt = "家庭共享照片";
        item.appendChild(img);
        previewGrid.appendChild(item);
      });
      previewModal.classList.add("active");
    });

    document.getElementById("preview-close").addEventListener("click", () => {
      previewModal.classList.remove("active");
    });

    previewGrid.addEventListener("click", (event) => {
      const item = event.target.closest(".select-item");
      if (!item) return;
      previewModal.classList.remove("active");
      openTimeSummary(item.dataset.src);
    });

    const sliceWithWrap = (start, count) => {
      const result = [];
      for (let i = 0; i < count; i += 1) {
        result.push(staticImages[(start + i) % staticImages.length]);
      }
      return result;
    };

    const memberData = {
      dad: {
        label: "爸爸",
        images: [
          "static/1769654310825_d.jpg",
          "static/1769656829735_d.jpg",
          "static/1769656851571_d.jpg",
          "static/1769656877772_d.jpg",
          "static/1769657480760_d.jpg",
        ],
        summary: "爸爸最近十天记录多是日常与散步，画面朴实，节奏稳。",
      },
      mom: {
        label: "妈妈",
        images: [
          "static/1769657502902_d.jpg",
          "static/1769657749561_d.jpg",
          "static/1769657776345_d.jpg",
          "static/1769657794037_d.jpg",
          "static/1769657827881_d.jpg",
        ],
        summary: "妈妈的照片多为生活片段与家常细节，氛围温暖。",
      },
      me: {
        label: "我",
        images: [
          "static/1769657875517_d.jpg",
          "static/1769658191713_d.jpg",
          "static/1769658200937_d.jpg",
          "static/1769658213096_d.jpg",
          "static/food.jpg",
        ],
        summary: "我的记录里有工作与小确幸，更多是放松与陪伴。",
      },
    };

    document.querySelectorAll(".member-view").forEach((btn) => {
      btn.addEventListener("click", () => {
        const key = btn.dataset.member;
        const data = memberData[key];
        memberTitle.textContent = `${data.label} · 最近十天`;
        memberSummary.textContent = data.summary;
        memberGrid.innerHTML = "";
        data.images.forEach((src) => {
          const item = document.createElement("div");
          item.className = "select-item";
          const img = document.createElement("img");
          img.src = src;
          img.alt = `${data.label} 照片`;
          item.appendChild(img);
          memberGrid.appendChild(item);
        });
        memberModal.classList.add("active");
      });
    });

    document.getElementById("member-close").addEventListener("click", () => {
      memberModal.classList.remove("active");
    });

    const shareModal = document.getElementById("share-modal");
    const shareBtn = document.querySelector(".share-pill");
    const shareClose = document.getElementById("share-close");
    const shareGrid = document.getElementById("share-grid");
    const shareSummary = document.getElementById("share-summary");
    const shareConfirm = document.getElementById("share-confirm");

    document.querySelectorAll(".typewriter").forEach((el, blockIndex) => {
      const text = el.dataset.text || "";
      el.textContent = "";
      Array.from(text).forEach((char, index) => {
        const span = document.createElement("span");
        span.className = "char";
        span.textContent = char;
        span.style.animationDelay = `${blockIndex * 500 + index * 35}ms`;
        el.appendChild(span);
      });
    });

    shareBtn.addEventListener("click", () => {
      shareModal.classList.add("active");
    });

    shareClose.addEventListener("click", () => {
      shareModal.classList.remove("active");
    });

    shareGrid.addEventListener("click", (event) => {
      const item = event.target.closest(".select-item");
      if (!item) return;
      item.classList.toggle("selected");
    });

    shareConfirm.addEventListener("click", () => {
      shareModal.classList.remove("active");
    });

    const bellBtn = document.getElementById("bell-btn");
    const bellPanel = document.getElementById("bell-panel");
    bellBtn.addEventListener("click", () => {
      bellPanel.classList.toggle("active");
      if (bellBtn.textContent === "✅") {
        bellBtn.textContent = "🔔";
      } else {
        bellBtn.textContent = "✅";
      }
      bellBtn.classList.remove("ringing");
      void bellBtn.offsetWidth;
      bellBtn.classList.add("ringing");
    });

    setInterval(() => {
      const now = new Date();
      document.getElementById("clock").textContent = `${now.getHours().toString().padStart(2, "0")}:${now
        .getMinutes()
        .toString()
        .padStart(2, "0")}`;
    }, 1000);
  </script>
</body>
</html>
